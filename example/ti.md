# Deploy on Ti

We provide an example of writing the quantization parameters generated by the "adaround" algorithm into the ti platform model.

For the ONNX model "model.onnx", quantification is first performed through Dipoorlet. The activation calibration method here uses "mse" and fine-tuning its weights using the "adaround" algorithm.

```
python -m torch.distributed.launch --use_env -m dipoorlet -M model.onnx -I workdir/ -N 100 -A mse -adaround -D ti
```

Dipoorlet will generate calibrated model "adaround.onnx" and quantitative configuration information "ti_blob_range.json":


```
ti_blob_range.json:
{
    "blob_range": {
        "0": [
            -2.1179039478302,
            2.4663430328313014
        ],
        "43": [
            -2.0301631384284935,
            2.0301631384284935
        ],
        "44": [
            0.0,
            2.256936187833351
        ],
        "45": [
            0.0,
            2.552265446675717
        ],
        "46": [
            -3.7930725929523827,
            3.2160835834009767
        ],
        "47": [
            0.0,
            1.5498370531397931
        ],
        ...
    }
}
```

Subsequently, rewrite quantize parameters:

```
import json
with open('ti_blob_range.json', 'r') as f:
    dipoorlet_range = json.load(f)

with open(os.path.join(os.environ.get('TIDL_PATH'), 'utils/tidlModelImport', 'blob_range.txt'), 'w') as f:
    for k, v in dipoorlet_range.items():
        f.write("{} {} {}\n".format(k, v[0], v[1]))
```